---
layout: layouts/base.njk
templateClass: tmpl-kids
---

<div id="games">
    <script id="snakes-and-mongooses">
        // game data
        const IN_PROGRESS = 'in progress'
        const TIE = 'tie'
        const WIN = 'win'

        const DEFAULT_GAME_STATE = {
          board: "---------",
          playerTurn: 'O', // human player is always O, goes first
          playing: false,
          winner: null,
          opponent: { // update this later using selectRandomOpponent()
            name: "Shirkhan"
          }
        }

        // functions to set DOM
        const clearCells = () => {
              const cellIds = ['0', '1', '2', '3', '4', '5', '6', '7', '8']
              cellIds.forEach(cellId => {
                const cell = document.getElementById(cellId)
                cell.innerText = ''
              })
        }
        const setSnakeBackground = (squareId) => {
            // assign the html elements such that squareId = the element ID
            const snakeSquare = document.getElementById(squareId)
            snakeSquare.className = "snake"
        }

        const setMongooseBackground = (squareId) => {
            // assign the html elements such that squareId = the element ID
            const mongooseSquare = document.getElementById(squareId)
            mongooseSquare.className = "mongoose"
        }
        // functions to handle the non-visual game play elements

String.prototype.replaceAt = function(index, replacement) {
  return this.substring(0, index) + replacement + this.substring(index + replacement.length);
}

function getRandomInt(max) {
  // HELP; use the internet!
  // returns random int with maximum value of max
  // your code goes here
}

const getEmptySquares = (board) => {
  // HELP!
  // use for dumb TTT opponent; return array of empty square indexes
  const emptySquares = []
  // your code goes here
  return emptySquares
}
const selectRandomOpponent = () => {
  // random opponent array of objects; lives in this function 
  // return a random opponent from that array 
}
const setOpponent = (opponent) => {
  // update game state with new opponent
  // update visual box to right of TTT game with opponent data, including power level  
}

const getDumbOpponentMove = (gameState) => { 
  // HELP ME! use getEmptySquares!  
  // your code goes here
  //return emptySquares[randomChoice]
}

const resetGameState = (gameState, newGameState) => {
  gameState.board = newGameState.board
  gameState.playerTurn = newGameState.playerTurn
  gameState.playing = newGameState.playing
  gameState.winner = newGameState.winner
  gameState.opponent = newGameState.opponent
}

function move(gameState, squareIndex) {
  gameState.board = gameState.board.replaceAt(squareIndex, gameState.playerTurn);
}

const setPlayerTurn = (gameState, player) => {
  if (player) {
    gameState.playerTurn = player
  } else {
    gameState.playerTurn = gameState.playerTurn === 'X' ? 'O' : 'X'
  }
}

const checkGameStatus = (board) => {
  // top row
  if (
    board.charAt(0) !== '-' &&
    (board.charAt(0) === board.charAt(1)) &&
    (board.charAt(1) === board.charAt(2))
  ) {
    return WIN
  }
  // middle row
  if (
    board.charAt(3) !== '-' &&
    (board.charAt(3) === board.charAt(4)) &&
    (board.charAt(4) === board.charAt(5))
  ) {
    return WIN
  }
  // right row
  if (
    board.charAt(6) !== '-' &&
    (board.charAt(6) === board.charAt(7)) &&
    (board.charAt(7) === board.charAt(8))
  ) {
    return WIN
  }
  // left col
  if (
    board.charAt(0) !== '-' &&
    (board.charAt(0) === board.charAt(3)) &&
    (board.charAt(3) === board.charAt(6))
  ) {
    return WIN
  }
  // middle col
  if (
    board.charAt(1) !== '-' &&
    (board.charAt(1) === board.charAt(4)) &&
    (board.charAt(4) === board.charAt(7))
  ) {
    return WIN
  }
  // right col
  if (
    board.charAt(6) !== '-' &&
    (board.charAt(6) === board.charAt(7)) &&
    (board.charAt(7) === board.charAt(8))
  ) {
    return WIN
  }
  // left-top-start diagonal
  if (
    board.charAt(6) !== '-' &&
    (board.charAt(6) === board.charAt(7)) &&
    (board.charAt(7) === board.charAt(8))
  ) {
    return WIN
  }
  // right-top-start diagonal
  if (
    board.charAt(6) !== '-' &&
    (board.charAt(6) === board.charAt(7)) &&
    (board.charAt(7) === board.charAt(8))
  ) {
    return WIN
  }

  if (getEmptySquares(board).length !== 0) {
    return IN_PROGRESS
  } else { // 
    return TIE
  }

}


const play = () => {
  let playerTurns = 0
  const gameState = {}
  let gameStatus;
  console.log("now playing TTT")
  resetGameState(gameState, DEFAULT_GAME_STATE)
  gameState.playing = true

  while (gameState.playing) {
    playerTurns += 1
    const turnMove = getDumbOpponentMove(gameState)
    move(gameState, turnMove)
    gameStatus = checkGameStatus(gameState.board)
    if (gameStatus !== IN_PROGRESS) {
      break;
    }
    // change player turn
    setPlayerTurn(gameState)
  }

  console.log("play done, game state:", gameState)

  if (gameStatus === WIN) {
    console.info(`\n${gameState.playerTurn} wins`)
    gameState.winner = true
  } else {
    console.info("The Game is a tie!")
  }

  gameState.playing = false
}
</script>
<script id="a-duck-strikes-back">

const UP = "ArrowUp";
const DOWN = "ArrowDown";
const LEFT = "ArrowLeft";
const RIGHT = "ArrowRight";

document.addEventListener("DOMContentLoaded", (event) => {
  const gameState = {
    score: 0,
    playing: false,
    size: 10,
    location: [25, 25],
    velocity: 5,
    duckImage: new Image(),
    duckImageContext: document
      .getElementById("duck-hunt-canvas")
      .getContext("2d")
  };

  function setDuckImage() {
    const duckImage = new Image();
    gameState.duckImage = duckImage;
    gameState.duckImage.src = "../img/duck.png"; // Set source path
    gameState.duckImage.id = "duck-image";
    gameState.duckImage.tabIndex = "1";
  }

  document.getElementById("play-duck-game").addEventListener("click", playDuckGame);

  function down(keyEvent) {
    // moves duck
    console.log("key presssed", keyEvent);
    console.log("location before change", gameState.location);
    // only move duck if playing game
    if (!gameState.playing) return;

    if (keyEvent.code === UP) {
      // move duck up
      updateLocation([
        gameState.location[0],
        gameState.location[1] + gameState.velocity
      ]);
    } else if (keyEvent.code === DOWN) {
      // move duck down
      updateLocation([
        gameState.location[0],
        gameState.location[1] - gameState.velocity
      ]);
    } else if (keyEvent.code === LEFT) {
      // move duck left
      updateLocation([
        gameState.location[0] - gameState.velocity,
        gameState.location[1]
      ]);
    } else if (keyEvent.code === RIGHT) {
      // move duck right
      updateLocation([
        gameState.location[0] + gameState.velocity,
        gameState.location[1]
      ]);
    }
    console.log("location after change", gameState.location);
    gameState.duckImageContext = document
      .getElementById("duck-hunt-canvas")
      .getContext("2d");
    setDuckImage();
    drawDuck();
  }

  function updateLocation(newLocation) {
    gameState.location = newLocation;
  }

  function gameOver() {
    gameState.playing = false;
  }

  function gameStart() {
    gameState.playing = true;
  }

  function playDuckGame() {
    console.info("playing");
    resetGameState({
      score: 0,
      playing: true,
      size: 10,
      location: [25, 25],
      duckImage: null,
      duckImageContext: null
    });
    gameStart();
  }

  function resetGameState(newGameState) {
    gameState.score = newGameState.score;
    gameState.duckImage = null;
    gameState.duckImageContext = null;
    gameState.playing = false;
    gameState.size = 10;
    gameState.location = [25, 25];
    setDuckImage();
  }

  function incrementScore() {
    gameState.score = gameState.score + 1;
  }

  function drawDuck() {
    console.log("maybe a duck drawn");
    if (gameState.duckImageContext) {
      console.log("------------------\na duck drawn");
      gameState.duckImageContext.drawImage(
        gameState.duckImage,
        gameState.location[0],
        gameState.location[1],
        gameState.size,
        gameState.size
      );
    }
  }

  function draw() {
    console.info("drawing");
    const scoreElement = document.getElementById("score");
    document.body.onkeydown = (event) => down(event);
    drawDuck();
    scoreElement.innerText = `${gameState.score}`;
  }
  // draws duck, sets up onkeydown
  draw();
});
</script>
<script>
  window.addEventListener("DOMContentLoaded", (event) => {
  const chessApiUrlBase = "https://www.chessdb.cn/cdb.php";

  const letters = ["A", "B", "C", "D", "E", "F", "G", "H"];

  const gameState = {
    lastOpponentMove: null,
    opponent: {
      name: "Shirkhan",
    },
    board: null,
  };

  const setVisualBoard = () => {
    const board = createVisualBoard();
    const boardContainer = document.getElementById("chess-table-container");
    boardContainer.innerHTML = board;
  };

  createVisualHeader = () => {
    let header = "";

    letters.forEach((letter) => {
      header += `<td class="letter" id="table-data-header-${letter.toLowerCase()}">${
        "  " + letter
      }</td>`;
    });

    return header;
  };

  createVisualColumns = () => {
    let columns = "";
    letters.forEach((letter, index) => {
      columns += `<td  class="game-col" id="game-col-${index + 1}"></td>`;
    });
    return columns;
  };

  createVisualRows = () => {
    let rows = "";
    letters.forEach((letter, index) => {
      rows += `<tr class="game-row" id="game-row-${letter}${
        index + 1
      }">${createVisualColumns()}</tr>`;
    });
    return rows;
  };

  const createVisualBoard = () => {
    // returns html table 8x8
    return `
    <table id="chess-board">
     <thead id="top-header>
      <tr id="table-header-row">
       ${createVisualHeader()}
      </tr>
      ${createVisualRows()}
     </thead>
    </table>`;
  };

  const createDataBoard = () => {
    const board = {};
    const letters = ["a", "b", "c", "d", "e", "f", "g", "h"];

    for (let letter of letters) {
      board[letter] = {};
      for (let currentNum = 1; currentNum <= 8; currentNum++) {
        board[letter][currentNum] = null;
      }
    }
    return board;
  };

  const generateQueryParams = () => {
    const params =
      "action=querybest&board=rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR%20w%20KQkq%20-%200%201&json=1";
    return "?" + params;
  };

  const generateFullUrl = () => chessApiUrlBase + generateQueryParams();

  const opponentMovesPiece = () => {
    console.info("opponentMovesPiece()");

    fetch(generateFullUrl())
      .then((response) => response.json())
      .then((data) => {
        console.log("fetched data", JSON.stringify(data, 2));
        updateLog(data.move, gameState.opponent.name);
        gameState.lastOpponentMove = data.move;
        console.info("gameState", gameState);
      });
  };

  const createLogItem = (moveString, opponent) => {
    console.info("createLogItem");
    const from = moveString.substring(0, 2);
    const to = moveString.substring(2);
    return `<p>${opponent} moves from ${from} to ${to}</p>`;
  };

  const updateLog = (moveString, opponentName) => {
    console.log("updateLog()");
    const logElement = document.getElementById("log");
    console.info("createLogItem()", createLogItem(moveString, opponentName));
    logElement.innerHTML += createLogItem(moveString, opponentName);
  };

  const play = () => {
    gameState.board = createDataBoard();
    setVisualBoard();
  };

  play();
  console.info("board", gameState.board);
  // event listeners
  const opponentMovesButton = document.getElementById("click-to-let-opp-move");
  opponentMovesButton.addEventListener("click", opponentMovesPiece);
});

</script>


    <div id="snakes-and-mongooses-game-section">
        <table id="board">
            <tr class="row">
                <td class="cell mongoose" id="0" onclick="clickCell('0')"></td>
                <td class="cell snake" id="1" onclick="clickCell('1')"></td>
                <td class="cell mongoose" id="2" onclick="clickCell('2')"></td>
            </tr>
            <tr class="row">
                <td class="cell snake" id="3" onclick="clickCell('3')"></td>
                <td class="cell mongoose" id="4" onclick="clickCell('4')"></td>
                <td class="cell mongoose" id="5" onclick="clickCell('5')"></td>
            </tr>
            <tr class="row">
                <td class="cell snake" id="6" onclick="clickCell('6')"></td>
                <td class="cell snake" id="7" onclick="clickCell('7')"></td>
                <td class="cell snake" id="8" onclick="clickCell('8')"></td>
            </tr>
        </table>
        <span>
            <button id="play-button" onclick="">
                Play TTT
            </button>
        </span>
        <p id="game-state-message">Press the 'Play' button And Click a square</p>
    </div>

    <div id="a-duck-strikes-back-game-section">

      <div id="duck-game">
        <center>
          <h2>Revenge of the Ducks: A Duck Strikes Back</h2>
        </center>
          <div id="game-info">
            <span>
              {% image "./img/duck.png", "a cunning duck", "100vw", "duck-score-image", "png", "../img" %}
              
              <h4>Score</h4>
              <h4 id="score"></h4>
              <h4 id="instructions">Hit 'Play' And Press the left/right/up/down arrow keys to move the duck</h4>
            </span>
            <button type="button" id="play-duck-game">Play</button>
          </div>
          <center>
            <canvas id="duck-hunt-canvas" width="500" height="500"></canvas>
          </center>
        </div>
    </div>

      <div>
      <center>
        <h2 id="title">Magic Chess</h2>
      </center>
      <main>
        <button id="click-to-let-opp-move">Go ahead and make your move!</button>
        <div id="log"></div>
        <div id="chess-table-container"></div>
      </main>
    </div>